{"id":"5c7e6879-dd42-4aae-a092-e859deca5d5c","revision":0,"last_node_id":33,"last_link_id":52,"nodes":[{"id":20,"type":"Label (rgthree)","pos":[1114.7878892941221,-144.64379403823236],"size":[318.4716796875,30],"flags":{"allow_interaction":true},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"By Urban Geo Analytics","properties":{"fontSize":30,"fontFamily":"Arial","fontColor":"#8080FF","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0,"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"color":"#fff0","bgcolor":"#fff0","shape":1},{"id":12,"type":"SaveImage","pos":[3116.3955788074736,622.3353837836212],"size":[270,270],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":10},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.67"},"widgets_values":["ComfyUI"]},{"id":9,"type":"VAEDecode","pos":[3083.8803687121117,436.04104974927395],"size":[140,46],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":9},{"localized_name":"vae","name":"vae","type":"VAE","link":26}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":19,"type":"Label (rgthree)","pos":[1110.38575595097,-207.85910357950036],"size":[1079.66796875,56],"flags":{"allow_interaction":true},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"QWEN IMAGE EDIT FOR URBANISM v1.1","properties":{"fontSize":56,"fontFamily":"Arial","fontColor":"#ffffff","textAlign":"left","backgroundColor":"transparent","padding":0,"borderRadius":0,"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"color":"#fff0","bgcolor":"#fff0","shape":1},{"id":23,"type":"LoraLoaderModelOnly","pos":[2299.2548638923736,6.936759700193347],"size":[270,82],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":35},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[47]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0-bf16.safetensors",1]},{"id":22,"type":"CFGNorm","pos":[1967.228946978311,6.799262723217266],"size":[270,58],"flags":{"collapsed":false},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":34},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"patched_model","name":"patched_model","type":"MODEL","links":[35]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"CFGNorm"},"widgets_values":[1]},{"id":21,"type":"ModelSamplingAuraFlow","pos":[1653.0788852201595,7.102499727381023],"size":[270,58],"flags":{"collapsed":false},"order":9,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":46},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[34]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ModelSamplingAuraFlow"},"widgets_values":[1.73]},{"id":2,"type":"ClipLoaderGGUF","pos":[1782.2464962064487,472.05609442871275],"size":[270,106],"flags":{"collapsed":false},"order":2,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[19]}],"properties":{"cnr_id":"gguf","ver":"2.6.5","Node name for S&R":"ClipLoaderGGUF"},"widgets_values":["qwen\\qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","cpu"]},{"id":18,"type":"ImageScaleToTotalPixels","pos":[1804.306395828632,283.4742787040456],"size":[270,82],"flags":{"collapsed":true},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":31},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[32]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["nearest-exact",1]},{"id":31,"type":"ImageScaleToTotalPixels","pos":[1807.9545882549573,413.58228532803054],"size":[270,82],"flags":{"collapsed":true},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":48},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[49]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["nearest-exact",1]},{"id":16,"type":"EmptySD3LatentImage","pos":[2340.805180986862,230.8329451668112],"size":[270,106],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":51},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":52},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[27]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[2000,2000,1]},{"id":17,"type":"GetImageSize","pos":[2071.9871008349705,254.90202015544443],"size":[140,124.00000000000006],"flags":{"collapsed":false},"order":15,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":32}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[51]},{"localized_name":"height","name":"height","type":"INT","links":[52]},{"localized_name":"batch_size","name":"batch_size","type":"INT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"GetImageSize"},"widgets_values":[]},{"id":25,"type":"ImageScaleToTotalPixels","pos":[1496.2137025242512,696.5630320028274],"size":[270,82],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":37},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[38]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["nearest-exact",1]},{"id":1,"type":"LoaderGGUF","pos":[1655.752910178828,183.0440553606229],"size":[270,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"gguf_name","name":"gguf_name","type":"COMBO","widget":{"name":"gguf_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[46]}],"properties":{"cnr_id":"gguf","ver":"2.6.5","Node name for S&R":"LoaderGGUF"},"widgets_values":["gguf\\Qwen-Image-Edit-2509-Q4_K_S.gguf"]},{"id":8,"type":"KSampler","pos":[2786.4256772732588,8.055298150848746],"size":[270,262],"flags":{"collapsed":false},"order":19,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":47},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":24},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":25},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":27},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"KSampler"},"widgets_values":[367,"increment",2,1,"euler","simple",1]},{"id":28,"type":"LoadImage","pos":[1114.180126274462,1061.4200957148248],"size":[274.080078125,314.0000000000001],"flags":{},"order":4,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[44]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Load Image 3","properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00014_.png","image"]},{"id":15,"type":"TextEncodeQwenImageEditPlus","pos":[2141.7085402438324,608.8590739687138],"size":[400,200],"flags":{"collapsed":false},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":19},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":20},{"localized_name":"image1","name":"image1","shape":7,"type":"IMAGE","link":49},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":38},{"localized_name":"image3","name":"image3","shape":7,"type":"IMAGE","link":40},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[24,25]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"TextEncodeQwenImageEditPlus"},"widgets_values":["add the image 2 red car in the street of image 1."]},{"id":24,"type":"LoadImage","pos":[1112.454855794714,667.4574698750163],"size":[274.080078125,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[37]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Load Image 2","properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"LoadImage"},"widgets_values":["pasted/image (17).png","image"]},{"id":4,"type":"LoadImage","pos":[1111.749932955892,269.68074428592473],"size":[270.9475403088861,327.74494022688873],"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[31,48]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"title":"Load Image 1","properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"LoadImage"},"widgets_values":["pasted/image (18).png","image"]},{"id":30,"type":"MarkdownNote","pos":[1111.1439060949963,-63.77793149808081],"size":[518.8544201592881,264.989782300718],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["## About This Workflow\nAll versions of **Qwen Image Edit for Urbanism** are designed as **fully local AI pipelines** â€” running offline, without APIs or cloud dependencies. While optimized for **urbanism and architectural visualization**, this workflow can be adapted to any image-editing or visual design context.  \n\n## About v1.1\nThis version introduces advanced sampling and multi-image editing capabilities.\n \n[v1.1 tutorial on Urban Geo Analytics](https://urbangeoanalytics.com/local-ai-image-editing-for-urbanism-v1-1/)\n\n"],"color":"#432","bgcolor":"#653"},{"id":26,"type":"ImageScaleToTotalPixels","pos":[1586.3612460685742,1089.6625379605264],"size":[270,82],"flags":{"collapsed":true},"order":10,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":44},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[40]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["nearest-exact",1]},{"id":3,"type":"VaeGGUF","pos":[1780.056774177488,1141.4029943027367],"size":[270,58],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[20,26]}],"properties":{"cnr_id":"gguf","ver":"2.6.5","Node name for S&R":"VaeGGUF"},"widgets_values":["qwen_image_vae.safetensors"]}],"links":[[9,8,0,9,0,"LATENT"],[10,9,0,12,0,"IMAGE"],[19,2,0,15,0,"CLIP"],[20,3,0,15,1,"VAE"],[24,15,0,8,1,"CONDITIONING"],[25,15,0,8,2,"CONDITIONING"],[26,3,0,9,1,"VAE"],[27,16,0,8,3,"LATENT"],[31,4,0,18,0,"IMAGE"],[32,18,0,17,0,"IMAGE"],[34,21,0,22,0,"MODEL"],[35,22,0,23,0,"MODEL"],[37,24,0,25,0,"IMAGE"],[38,25,0,15,3,"IMAGE"],[40,26,0,15,4,"IMAGE"],[44,28,0,26,0,"IMAGE"],[46,1,0,21,0,"MODEL"],[47,23,0,8,0,"MODEL"],[48,4,0,31,0,"IMAGE"],[49,31,0,15,2,"IMAGE"],[51,17,0,16,0,"INT"],[52,17,1,16,1,"INT"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.5730855330116845,"offset":[-404.329160018429,131.76280521409913]}},"version":0.4}